/* food.0.0.1 (2013-10-08) https://github.com/solygen/food.git */var templates={meal:{name:"unknown",flags:"",ingredients:[],steps:[]},ingredient:{name:"unknown",unit:"piece",weight:"?",price:0,ean:[]}},data={meals:[],ingredients:[{name:"mozzarella",unit:"piece",weight:"200g",price:.55,ean:["20013295"]},{name:"paprika",unit:"piece",weight:"200g",price:.5,ean:["4712"]}]};data.meals.push($.extend({},templates.meal||{},{name:"Backofenkartoffeln",flags:"",ingredients:[{quantity:3,name:"kartoffeln"}]})),data.meals.push($.extend({},templates.meal||{},{name:"Bolognese",flags:"",ingredients:[{quantity:1,name:"hackfleisch"},{quantity:1,name:"spagetthi"},{quantity:1,name:"dosentomaten"},{quantity:1,name:"zwiebeln"}]})),data.meals.push($.extend({},templates.meal||{},{name:"Champignonpfännchen",flags:"",ingredients:[{quantity:2,unit:"stk",name:"zwiebeln"},{quantity:400,unit:"gramm",name:"champignons"},{quantity:200,unit:"gramm",name:"saure sahne"},{quantity:4,unit:"stk",name:"schnittlauch"}]})),data.meals.push($.extend({},templates.meal||{},{name:"Frikadellen und Möhren",flags:"",ingredients:[{quantity:1,name:"hackfleisch"},{quantity:1,name:"kartoffeln"},{quantity:1,name:"möhren"}]})),data.meals.push($.extend({},templates.meal||{},{name:"Gemüsekuchen",flags:"",ingredients:[{quantity:3,unit:"stk",name:"paprika"},{quantity:400,unit:"g",name:"mehl"},{quantity:4,unit:"stk",name:"frühlingszwiebeln"},{quantity:100,unit:"g",name:"gouda"},{quantity:4,unit:"stk",name:"eier"}],steps:["",""]})),data.meals.push($.extend({},templates.meal||{},{name:"Gulasch",flags:"",ingredients:[{quantity:1,name:"gulasch"},{quantity:1,name:"pilze"},{quantity:1,name:"zwiebeln"}]})),data.meals.push($.extend({},templates.meal||{},{name:"Gurkensuppe",flags:"",ingredients:[{quantity:1,name:"gurken"},{quantity:1,name:"zwiebeln"}]})),data.meals.push($.extend({},templates.meal||{},{name:"Hühnerfrikassee",flags:"",ingredients:[{quantity:1,name:"suppenhuhn"},{quantity:1,name:"erbsen"},{quantity:1,name:"sahne"}]})),data.meals.push($.extend({},templates.meal||{},{name:"Lachs",flags:"",ingredients:[{quantity:1,name:"lachs"},{quantity:1,name:"nudeln"},{quantity:1,name:"sahne"},{quantity:1,name:"frischkäse"}]})),data.meals.push($.extend({},templates.meal||{},{name:"Linsengemüse",flags:"",ingredients:[{quantity:1,name:"linsen"},{quantity:3,name:"kartoffeln"},{quantity:1,name:"frühlingszwiebeln"}]})),data.meals.push($.extend({},templates.meal||{},{name:"Omlett",flags:"",ingredients:[{quantity:2,name:"eier"},{quantity:1,name:"tomaten"},{quantity:1,name:"gekochter schinken"},{quantity:1,name:"mozarella"},{quantity:1,name:"sahne"}]})),data.meals.push($.extend({},templates.meal||{},{name:"Paprika Gehacktes",flags:"",ingredients:[{quantity:1,name:"mozarella"},{quantity:3,name:"paprika"},{quantity:1,name:"hackfleisch"},{quantity:1,name:"zwiebeln"},{quantity:1,name:"frischkäse"}]})),data.meals.push($.extend({},templates.meal||{},{name:"Spinat",flags:"",ingredients:[{quantity:1,name:"spinat"},{quantity:1,name:"kartoffeln"},{quantity:1,name:"zwiebeln"}]})),data.meals.push($.extend({},templates.meal||{},{name:"Zucchini mit Hähnchenbrust",flags:"",ingredients:[{quantity:1,name:"zucchini"},{quantity:1,name:"reis"},{quantity:1,name:"hähnchenbrustfilet"}]}));var recipies=$(document.body).find(".recipies").hide(),ing,node;ingredients=$(document.body).find(".ingredients").hide(),hash={},list=[],$(window).on("hashchange",function(){"#"===location.hash.substr(0,1)&&location.hash.length>1&&("#recipies"===location.hash?(recipies.show(),ingredients.hide()):"#ingredients"===location.hash?(ingredients.show(),recipies.hide()):(ingredients.hide(),recipies.hide()))}),_.each(data.meals,function(a){ing=_.map(a.ingredients,function(a){return a.name+(a.unit?" ("+a.quantity+" "+a.unit+")":"")}),node=$("<tr>").append($("<td>").text(a.name),$("<td>").text(ing.join(", "))),recipies.find(".content").append(node)}),_.each(data.meals,function(a){_.each(a.ingredients,function(a){hash[a.name]=(hash[a.name]||0)+1})}),_.each(hash,function(a,b){list=list.concat({count:a,name:b})}),list.sort(function(a,b){var c="count";return a[c]<b[c]?1:a[c]>b[c]?-1:0}),_.each(list,function(a){node=$("<tr>").append($("<td>").text(a.name),$("<td>").text(a.count)),ingredients.find(".content").append(node)});